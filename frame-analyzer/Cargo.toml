[package]
name = "frame-analyzer"
readme.workspace = true
edition.workspace = true
version.workspace = true
authors.workspace = true
description.workspace = true
documentation.workspace = true
repository.workspace = true
license.workspace = true

[dependencies]
aya = "0.13.1"
frame-analyzer-ebpf-common = { path = "../frame-analyzer-ebpf-common", features = ["user"], version = "0" }
anyhow = "1"
libc = "0.2"
thiserror = "2.0.11"
ctor = "0.4.0"
ctrlc = "3.4.4"
mio = { version = "1.0.3", features = ["os-ext"] } # 移除无效的unix特性
once_cell = "1.19.0" # 新增缺失依赖

[build-dependencies]
anyhow = "1.0.96"
cc = "1.0" # 可选：用于C代码编译

[lib]
crate-type = ["cdylib", "rlib"] # 支持C动态库+Rust库

[package.metadata]
supported-targets = ["aarch64-linux-android", "aarch64-unknown-linux-gnu"]
